/*! iPodJS | (c) Duhnnie (Daniel Canedo) | http://duhnnie.net | https://github.com/duhnnie/iPodJS */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.iPodJS=e():t.iPodJS=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=2)}([function(t,e){t.exports="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},function(t,e,r){},function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}r.r(e),r.d(e,"create",(function(){return _t}));var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({id:(new Date).getTime()+""+Math.round(1e6*Math.random())},e),this._elementTag="div",this._html=null,this._dom={},this.setId(e.id)}return a(t,null,[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=document.createElement(t);return e=Array.isArray(e)?e:e&&e.split(" ")||[],r&&n.setAttribute("id",r),e.forEach((function(t){return n.classList.add(t)})),n}},{key:"createText",value:function(t){return document.createTextNode(t)}}]),a(t,[{key:"setId",value:function(t){this._id=t,this._html&&this._html.setAttribute("id",t)}},{key:"_resolveElement",value:function(t){if(t){if("string"==typeof t)t=this._dom[t];else if(!(t instanceof window.HTMLElement))throw new Error("_addToDOM(): The second parameter must be a string, object or null.")}else t=this._html;return t=t||this._html}},{key:"_addToDOM",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(e=this._resolveElement(e)).appendChild(t),"string"==typeof r&&(this._dom[r]=t)}},{key:"_clear",value:function(t){for(t=this._resolveElement(t);t.childNodes.length;)t.removeChild(t.childNodes[0])}},{key:"_setToDOM",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._clear(e),this._addToDOM(t,e,r)}},{key:"_removeFromDOM",value:function(t){if("string"==typeof t)this._dom[t].remove(),delete this._dom[t];else{if(!(t instanceof window.HTMLElement))throw new Error("_removeFromDOM(): The parameter must be a string or a HTMLElement");t.remove()}}},{key:"_getFromDOM",value:function(t){return this._dom[t]||null}},{key:"_getRootClasses",value:function(){return[]}},{key:"_addEventListeners",value:function(){}},{key:"_createHTML",value:function(){var e=this;return this._html||(this._html=t.create(this._elementTag),this.setId(this._id),this._getRootClasses().forEach((function(t){e._html.classList.add(t)})),this._addEventListeners()),this}},{key:"getHTML",value:function(){return this._html||this._createHTML(),this._html}}]),t}();function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,r){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b(t);if(e){var i=b(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(o,t);var e,r,n,i=p(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e=i.call(this,t),t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({onClick:null},t),e._elementTag="li",e._onClick=null,e.setOnClick(t.onClick),e}return e=o,(r=[{key:"setOnClick",value:function(t){if(null!==t&&"function"!=typeof t)throw new Error("setOnClick(): The parameter must be a function or null.");this._onClick=t}},{key:"showPlayingIcon",value:function(){this._html.classList.add("playing")}},{key:"hidePlayingIcon",value:function(){this._html.classList.remove("playing")}},{key:"_onClickHandler",value:function(t){t.preventDefault(),this._onClick&&this._onClick(this)}},{key:"_addEventListeners",value:function(){var t=this._getFromDOM("link");t&&t.addEventListener("click",this._onClickHandler.bind(this))}},{key:"_getRootClasses",value:function(){return["playlist"]}},{key:"_createHTML",value:function(){if(!this._html){var t=c.create("a"),e=c.create("div"),r=c.create("div"),n=c.create("div");y(b(o.prototype),"_createHTML",this).call(this),t.setAttribute("href","#"),t.classList.add("link"),r.classList.add("title"),n.classList.add("subtitle"),this._addToDOM(t,null,"link"),this._addToDOM(e,"link","textContainer"),this._addToDOM(r,"textContainer","title"),this._addToDOM(n,"textContainer","subtitle"),this._addEventListeners()}}}])&&f(e.prototype,r),n&&f(e,n),o}(c);function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function k(t,e,r){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=S(t);if(e){var i=S(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return w(this,r)}}function w(t,e){return!e||"object"!==v(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(o,t);var e,r,n,i=T(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e=i.call(this,t),t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){m(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({artist:"[unknown artist]",title:"[untitled]",album:"[unknown album]",artwork:null,audio:"",index:null,rating:0,parentPlaylist:null},t),e._artist=t.artist,e._title=t.title,e._album=t.album,e._artwork=t.artwork,e._audio=t.audio||"",e._rating=t.rating,e._parentPlaylist=t.parentPlaylist,e.setIndex(t.index),e.setParentPlaylist(t.parentPlaylist),e}return e=o,(r=[{key:"setParentPlaylist",value:function(t){if(!(t instanceof B||null===t))throw new Error("setParentPlaylist(): The parameter must be an instance of Playlist or null.");this._parentPlaylist=t}},{key:"getParentPlaylist",value:function(){return this._parentPlaylist}},{key:"setIndex",value:function(t){this._index=t}},{key:"getAudio",value:function(){return this._audio}},{key:"getInfo",value:function(){return{artist:this._artist,title:this._title,album:this._album,artwork:this._artwork,audio:this._audio,index:this._index,rating:this._rating}}},{key:"showPlayingIcon",value:function(){k(S(o.prototype),"showPlayingIcon",this).call(this),this._parentPlaylist.showPlayingIcon()}},{key:"hidePlayingIcon",value:function(){k(S(o.prototype),"hidePlayingIcon",this).call(this),this._parentPlaylist.hidePlayingIcon()}},{key:"_createHTML",value:function(){this._html||(k(S(o.prototype),"_createHTML",this).call(this),this._addToDOM(c.createText(this._artist),"title"),this._addToDOM(c.createText(this._title),"subtitle"))}}])&&g(e.prototype,r),n&&g(e,n),o}(_);function E(t){return function(t){if(Array.isArray(t))return D(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t,e,r){return(R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=N(t);if(e){var i=N(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return H(this,r)}}function H(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(o,t);var e,r,n,i=I(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e=i.call(this,t),t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?M(Object(r),!0).forEach((function(e){L(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({name:"[untitled playlist]",tracks:[],onSelectTrack:null},t),e._name=t.name,e._tracks=new Set,e.setTracks(t.tracks),e.setOnSelectTrack(t.onSelectTrack),e}return e=o,(r=[{key:"setOnSelectTrack",value:function(t){null!==t&&"function"!=typeof t||(this._onSelectTrack=t)}},{key:"clearTracks",value:function(){this._tracks.clear()}},{key:"_onSelectTrackHandler",value:function(t){return this._onSelectTrack&&this._onSelectTrack(t)}},{key:"addTrack",value:function(t){if("object"!==A(t))throw new Error("addTrack(): The parameter must be an object or an instance of Track");t instanceof j||(t=new j(t)),t.setParentPlaylist(this),t.setOnClick(this._onSelectTrackHandler.bind(this)),t.setIndex(this._tracks.size),this._tracks.add(t)}},{key:"setTracks",value:function(t){if(!Array.isArray(t))throw new Error("setTracks(): The parameter must be an array.");this.clearTracks(),t.forEach(this.addTrack.bind(this))}},{key:"getName",value:function(){return this._name}},{key:"getTracks",value:function(){return E(this._tracks)}},{key:"getTrack",value:function(t){return this.getTracks()[t]}},{key:"_createHTML",value:function(){this._html||(R(N(o.prototype),"_createHTML",this).call(this),this._getFromDOM("link").classList.add("item"),this._addToDOM(c.createText(this._name),"title"),this._addToDOM(c.createText("".concat(this._tracks.size," Songs")),"subtitle"),this._addEventListeners())}}])&&x(e.prototype,r),n&&x(e,n),o}(_),Y=function(t,e,r,n){var i=parseInt(r,10),o=r.replace(i,""),a=parseInt(t.style[e],10)||0,c=i-a,l=Math.abs(c),u=c/30,s=0,f=window.setInterval((function(){if(s+=u,Math.abs(s)>=l)return window.clearInterval(f),t.style[e]="".concat(i).concat(o),n&&n();t.style[e]="".concat(a+s).concat(o)}),500/30)},F=function(t){t=Math.round(t);var e=Math.floor(t/3600),r=Math.floor((t-3600*e)/60),n=t%3600;return n=t<10?"0".concat(n):t,r=(e>0&&r<10?"0".concat(r):r)+":",(e?e+":":"")+"".concat(r).concat(n)},K=r(0),G=r.n(K);function z(t){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function W(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $(t,e,r){return($="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=X(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=X(t);if(e){var i=X(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return V(this,r)}}function V(t,e){return!e||"object"!==z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(o,t);var e,r,n,i=q(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e=i.call(this,t),t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?U(Object(r),!0).forEach((function(e){W(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({onEnded:null,onError:null,track:null},t),e._audio=new window.Audio,e._onEnded=t.onEnded,e._onError=t.onError,e.setTrack(t.track),e}return e=o,(r=[{key:"_showTrackNotification",value:function(t){this._getFromDOM("trackNotification").data=t}},{key:"play",value:function(){var t=this._track.getAudio();this._audio.src!==t&&(this._audio.src=t),this._audio.src?this._audio.play().catch(this._onPlaybackError.bind(this)):this._onPlaybackError(new window.DOMException("","NotSupportedError"))}},{key:"pause",value:function(){this._audio.pause()}},{key:"_getRootClasses",value:function(){return["playview"]}},{key:"setTrack",value:function(t){var e;if(this._track&&this._track.hidePlayingIcon(),this._track=t,t&&t.showPlayingIcon(),t?(e=t.getInfo()).index="".concat(e.index+1," of ").concat(t.getParentPlaylist().getTracks().length):e={},this._html){for(var r="",n=0;n<e.rating;n++)r+="★";this._setToDOM(c.createText(e.artist),"artist"),this._setToDOM(c.createText(e.title),"title"),this._getFromDOM("artwork").style.backgroundImage="url(".concat(e.artwork||"",")"),this._setToDOM(c.createText(e.album),"album"),this._setToDOM(c.createText(r),"rating"),this._setToDOM(c.createText(e.index),"index"),this._setPlaybackTime(0,0),this._showTrackNotification(e.audio?"":"[not available]"),this._audio.currentSrc&&this.pause()}return this}},{key:"getTrack",value:function(){return this._track}},{key:"_setPlaybackTime",value:function(t,e){var r=Math.round(e),n=Math.round(t-r);this._setToDOM(c.createText("".concat(F(r))),"elapsedTime"),this._getFromDOM("progressBar").style.width="".concat(e/t*100||0,"%"),this._setToDOM(c.createText("-".concat(F(n||0))),"remainingTime")}},{key:"_onEndedHandler",value:function(){return this._onEnded&&this._onEnded(this._track)}},{key:"_onPlaybackError",value:function(t){if(t.code!==window.DOMException.ABORT_ERR)return this._showTrackNotification("[not available]"),this._onError&&this._onError(t,this._track)}},{key:"_onLoadedData",value:function(t){this._showTrackNotification(""),this._setPlaybackTime(t.target.duration,0)}},{key:"_addEventListeners",value:function(){var t=this;this._audio.addEventListener("timeupdate",(function(e){t._track&&t._setPlaybackTime(e.target.duration,e.target.currentTime)})),this._audio.addEventListener("ended",this._onEndedHandler.bind(this)),this._audio.addEventListener("loadstart",(function(){return t._showTrackNotification("loading...")})),this._audio.addEventListener("loadeddata",(function(e){return t._onLoadedData(e)}))}},{key:"_createHTML",value:function(){this._html||($(X(o.prototype),"_createHTML",this).call(this),this._addToDOM(c.create("div","container"),null,"trackInfoContainer"),this._addToDOM(c.create("img","artwork"),"trackInfoContainer","artwork"),this._addToDOM(c.create("div","track-titles"),"trackInfoContainer","trackTitles"),this._addToDOM(c.create("ul","track-titles-list"),"trackTitles","trackTitlesList"),this._addToDOM(c.create("li",["track-titles-list-item","big"]),"trackTitlesList","title"),this._addToDOM(c.create("li",["track-titles-list-item","small"]),"trackTitlesList","artist"),this._addToDOM(c.create("li",["track-titles-list-item","small"]),"trackTitlesList","album"),this._addToDOM(c.create("li","track-titles-list-item"),"trackTitlesList","rating"),this._addToDOM(c.create("li",["track-titles-list-item","index"]),"trackTitlesList","index"),this._getFromDOM("artwork").setAttribute("src",G.a),this._addToDOM(c.create("div","timebox"),null,"timebox"),this._addToDOM(c.create("span"),"timebox","elapsedTime"),this._addToDOM(c.create("div","progress-container"),"timebox","progressBarContainer"),this._addToDOM(c.createText(""),"progressBarContainer","trackNotification"),this._addToDOM(c.create("div","progress-bar"),"progressBarContainer","progressBar"),this._addToDOM(c.create("span"),"timebox","remainingTime"),this.setTrack(this._track))}}])&&J(e.prototype,r),n&&J(e,n),o}(c);function tt(t){return function(t){if(Array.isArray(t))return et(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function it(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ot(t,e,r){return(ot="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yt(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function at(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ct(t,e,r){return e&&at(t.prototype,e),r&&at(t,r),t}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=yt(t);if(e){var i=yt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return st(this,r)}}function st(t,e){return!e||"object"!==rt(e)&&"function"!=typeof e?ft(t):e}function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(r,t);var e=ut(r);function r(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),n=e.call(this,t),t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(r),!0).forEach((function(e){it(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({playlists:[],skipOnError:!0,timeBeforeSkip:5e3,width:445},t),n._playlists=new Set,n._playbackState=null,n._currentPlaylist=null,n._currentScreen=null,n._width=t.height?null:t.width,n._height=t.height,n._playview=new Z({onEnded:n._onPlayEnd.bind(ft(n)),onError:n._onPlaybackError.bind(ft(n))}),n._timeoutRef=null,n._skipOnError=t.skipOnError,n._timeBeforeSkip=t.timeBeforeSkip,n.setPlaylists(t.playlists),n._setPlaybackState(r.PLAYBACK_STATES.STOPPED),n}return ct(r,null,[{key:"SCREENS",get:function(){return{HOME:{left:"0%",text:"Playlists"},PLAYLIST:{left:"-100%",text:function(t){return t._currentPlaylist.getName()},parent:"HOME"},NOW_PLAYING:{left:"-200%",text:"Now Playing",parent:"PLAYLIST"}}}},{key:"PLAYBACK_STATES",get:function(){return{STOPPED:0,PLAYING:1,PAUSED:2}}}]),ct(r,[{key:"_onPlaybackError",value:function(t,e){var r=this;this._skipOnError&&t&&(this._timeoutRef=setTimeout((function(){window.clearTimeout(r._timeoutRef),r._onPlayEnd(e)}),this._timeBeforeSkip))}},{key:"_setPlaybackState",value:function(t){if(this._playbackState=t,this._html)switch(this._html.classList.remove("playing"),this._html.classList.remove("paused"),t){case r.PLAYBACK_STATES.PLAYING:this._html.classList.add("playing");break;case r.PLAYBACK_STATES.PAUSED:this._html.classList.add("paused")}}},{key:"_gotoScreen",value:function(t){var e=this,r=this._getFromDOM("container");Y(r,"left","".concat(t.left),(function(){e._currentScreen=t,e._getFromDOM("topBarText").data="function"==typeof t.text?t.text(e):t.text}))}},{key:"_onPlayEnd",value:function(t){this.next()}},{key:"_applySize",value:function(t,e){if(this._html){var r=this._getFromDOM("screen");this._html.style.width="".concat(t,"px"),this._html.style.height="".concat(e,"px"),r.style.borderWidth="".concat(.01348*t,"px"),r.style.fontSize="".concat(.060674*t,"px")}return this}},{key:"isPlaying",value:function(){return this._playbackState===r.PLAYBACK_STATES.PLAYING}},{key:"setWidth",value:function(t){var e=t/.65441;return this._width=t,this._height=null,this._applySize(t,e)}},{key:"setHeight",value:function(t){var e=.65441*t;return this._width=null,this._height=t,this._applySize(e,t)}},{key:"getSize",value:function(){var t=this._width,e=this._height;return t?{width:t,height:t/.65441}:{widht:.65441*e,height:e}}},{key:"back",value:function(){var t=this._currentScreen.parent;t&&this._gotoScreen(r.SCREENS[t])}},{key:"clearPlaylists",value:function(){this._playlists.clear()}},{key:"_setTracklist",value:function(t){var e=this,r=t.getTracks();this._currentPlaylist=t,this._clear("tracklistPanel"),r.forEach((function(t){e._addToDOM(t.getHTML(),"tracklistPanel")}))}},{key:"_onSelectPlaylist",value:function(t){this._setTracklist(t),this._gotoScreen(r.SCREENS.PLAYLIST)}},{key:"_onSelectTrackHandler",value:function(t){this._setTrack(t,!0),this._gotoScreen(r.SCREENS.NOW_PLAYING)}},{key:"_setTrack",value:function(t,e){window.clearTimeout(this._timeoutRef),this._playview.setTrack(t),e&&this._play()}},{key:"_play",value:function(){this._setPlaybackState(r.PLAYBACK_STATES.PLAYING),this._playview.play()}},{key:"_pause",value:function(){window.clearTimeout(this._timeoutRef),this._setPlaybackState(r.PLAYBACK_STATES.PAUSED),this._playview.pause()}},{key:"playPause",value:function(){this._playview.getTrack()&&(this._playbackState===r.PLAYBACK_STATES.PAUSED?this._play():this._pause())}},{key:"_moveOnPlaylist",value:function(t){var e=this._playview.getTrack();if(e){var n=e.getParentPlaylist().getTrack(e.getInfo().index+t);n||(this._setPlaybackState(r.PLAYBACK_STATES.STOPPED),this._gotoScreen(r.SCREENS.PLAYLIST)),this._setTrack(n,this._playbackState===r.PLAYBACK_STATES.PLAYING)}}},{key:"prev",value:function(){this._moveOnPlaylist(-1)}},{key:"next",value:function(){this._moveOnPlaylist(1)}},{key:"addPlaylist",value:function(t){if("object"!==rt(t))throw new Error("addPlaylist(): The parameter must be an object or an instance of Playlist.");t instanceof B||(t=new B(t)),t.setOnClick(this._onSelectPlaylist.bind(this)),t.setOnSelectTrack(this._onSelectTrackHandler.bind(this)),this._playlists.add(t),this._html&&this._addToDOM(t.getHTML(),"playlistPanel")}},{key:"setPlaylists",value:function(t){if(!Array.isArray(t))throw new Error("setPlaylist(): The parameter must be an array.");this.clearPlaylists(),t.forEach(this.addPlaylist.bind(this))}},{key:"_getRootClasses",value:function(){return["ipodjs"]}},{key:"_addEventListeners",value:function(){if(this._getFromDOM("screen")){var t=this;this._getControlsHTMLDef().forEach((function(e){t._getFromDOM(e.ref).addEventListener("click",(function(t){t.preventDefault(),e.handler()}))}))}}},{key:"_getControlsHTMLDef",value:function(){return[{ref:"menu-link",handler:this.back.bind(this)},{ref:"forward-link",handler:this.next.bind(this)},{ref:"backward-link",handler:this.prev.bind(this)},{ref:"play-link",handler:this.playPause.bind(this)},{ref:"select-link",handler:function(){}}]}},{key:"_createHTML",value:function(){var t=this;if(!this._html){var e=c.create("div","screen"),n=c.create("div","top-bar"),i=c.create("div","screen-container"),o=c.create("ul",["panel","list"]),a=c.create("ul",["panel","list"]),l=c.create("div","panel");ot(yt(r.prototype),"_createHTML",this).call(this),this._getControlsHTMLDef().forEach((function(e){var r=c.create("img"),n=c.create("a",e.ref);r.src=G.a,n.href="#",t._addToDOM(n,null,e.ref),t._addToDOM(r,e.ref)})),this._addToDOM(e,null,"screen"),this._addToDOM(n,"screen","topBar"),this._addToDOM(i,"screen","container"),this._addToDOM(o,"container","playlistPanel"),this._addToDOM(a,"container","tracklistPanel"),this._addToDOM(l,"container","playingPanel"),this._addToDOM(c.createText(""),"topBar","topBarText"),this._addToDOM(this._playview.getHTML(),"playingPanel"),this.setPlaylists(tt(this._playlists)),this._gotoScreen(r.SCREENS.HOME),this._width?this.setWidth(this._width):this.setHeight(this._height),this._addEventListeners()}return this}}]),r}(c);r(1);function pt(t,e,r){return(pt=dt()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&bt(i,r.prototype),i}).apply(null,arguments)}function dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function bt(t,e){return(bt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _t(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return pt(ht,e)}e.default={create:_t}}])}));
//# sourceMappingURL=ipod.js.map